#java #字节码

> [!参考文档]
> Free-coder : [java字节码](https://www.xiaogenban1993.com/blog/24.07/java%E5%AD%97%E8%8A%82%E7%A0%81)
> [java 21 字节码规范]([Chapter 4. The class File Format](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html))

# 什么是字节码

`.class` 文件的内容就是字节码，`jvm` 定制了一套 `class` 文件规范，只要按照这个规范的文件就可以在 `jvm` 中被加载成 `类`。

字节码本质是一串 byte 数组.
使用 linux xxd 命令查看. Class 文件
![](Pasted%20image%2020241225131834.png)

# 查看字节码工具

Idea 插件市场下载按照 ASM Betycode Viewer
使用: 右键弹出操作菜单,点击 ASM Betycode Viewer, 就会将当前的 java 文件的字节码展示出来.

![](Pasted%20image%2020241225125214.png)

另外一个插件 jclasslib Bytecode Viewer
插件的用法是，先 `compile` 之后，选中要查看的 .class 文件,通过 `view->Show Bytecode With Jclasslib`
![](Pasted%20image%2020241225130958.png)

![](Pasted%20image%2020241225130843.png)

# 类文件规范

从 java 7 到 21, Class 文件的结构一直没变过, 更早的版本也可能是一样的.
![](Pasted%20image%2020241225132258.png)
```text
magic 
	魔数
minor_version, major_version
	小版本和大版本
	52对应java8,53对应java9
constant_pool_count
	常量池计数
constant_pool
	常量池
access_flags
	类或接口的访问标志
	
	
```